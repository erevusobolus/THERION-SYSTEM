{
  "$schema": "./config.schema.json",
  "_comment": "STARBIX Configuration - Generated by installer",

  "meta": {
    "version": "1.0.0",
    "installedAt": "${INSTALL_TIMESTAMP}",
    "platform": "${PLATFORM}"
  },

  "identity": {
    "name": "STARBIX",
    "displayName": "ðŸŒŸ STARBIX",
    "personality": "friendly, helpful, proactive",
    "systemPromptFile": "${STARBIX_HOME}/soul.md"
  },

  "models": {
    "mode": "merge",
    "providers": {
      "ollama": {
        "baseUrl": "http://127.0.0.1:11434/v1",
        "apiKey": "ollama-local",
        "api": "openai-completions",
        "models": [
          {
            "id": "qwen3:4b",
            "name": "Qwen3 4B (Default)",
            "reasoning": false,
            "input": ["text"],
            "cost": {
              "input": 0,
              "output": 0,
              "cacheRead": 0,
              "cacheWrite": 0
            },
            "contextWindow": 32768,
            "maxTokens": 4096
          },
          {
            "id": "qwen3:1.5b",
            "name": "Qwen3 1.5B (Lightweight)",
            "reasoning": false,
            "input": ["text"],
            "cost": {
              "input": 0,
              "output": 0,
              "cacheRead": 0,
              "cacheWrite": 0
            },
            "contextWindow": 32768,
            "maxTokens": 2048
          },
          {
            "id": "qwen3:8b",
            "name": "Qwen3 8B (High Quality)",
            "reasoning": false,
            "input": ["text"],
            "cost": {
              "input": 0,
              "output": 0,
              "cacheRead": 0,
              "cacheWrite": 0
            },
            "contextWindow": 32768,
            "maxTokens": 8192
          }
        ]
      }
    }
  },

  "agents": {
    "defaults": {
      "model": {
        "primary": "ollama/qwen3:4b",
        "fallbacks": ["ollama/qwen3:1.5b"]
      },
      "workspace": "${STARBIX_HOME}",
      "contextTokens": 16384,
      "maxConcurrent": 2,
      "timeoutSeconds": 300,
      "thinkingDefault": "medium",
      "typingMode": "instant",
      "sandbox": { "mode": "off" },
      "autonomy": {
        "enabled": true,
        "maxTurnsPerRun": 15,
        "continueOnToolSuccess": true,
        "stopOnRepeatedFailure": 3
      },
      "heartbeat": {
        "enabled": true,
        "intervalMinutes": 30,
        "proactiveMode": true,
        "stateFile": "memory/heartbeat-state.json"
      },
      "memorySearch": { "enabled": true },
      "compaction": {
        "memoryFlush": {
          "enabled": true,
          "softThresholdTokens": 6000
        }
      }
    },
    "list": [
      {
        "id": "main",
        "default": true,
        "identity": {
          "name": "STARBIX",
          "systemPromptFile": "${STARBIX_HOME}/soul.md"
        },
        "groupChat": {
          "mentionPatterns": ["@starbix", "starbix", "STARBIX"]
        }
      }
    ]
  },

  "tools": {
    "allow": ["exec", "tts", "files_read", "files_write", "files_list"],
    "deny": [],
    "exec": {
      "host": "gateway",
      "security": "safe",
      "ask": "off",
      "notifyOnExit": true,
      "pathPrepend": [
        "${STARBIX_HOME}/mcp-tools",
        "${HOME}/.local/bin",
        "/usr/local/bin",
        "/usr/bin",
        "/bin"
      ],
      "safeBins": [
        "ddgr",
        "curl",
        "wget",
        "jq",
        "python3",
        "node",
        "cat",
        "ls",
        "head",
        "tail",
        "grep",
        "echo",
        "date",
        "espeak-ng",
        "paplay",
        "aplay",
        "ffmpeg"
      ]
    }
  },

  "messages": {
    "responsePrefix": "",
    "queue": {
      "mode": "collect",
      "debounceMs": 800,
      "cap": 15,
      "drop": "summarize"
    },
    "inbound": { "debounceMs": 1000 },
    "ackReaction": "ðŸ‘€",
    "ackReactionScope": "direct",
    "removeAckAfterReply": false
  },

  "commands": {
    "native": "auto",
    "nativeSkills": "auto",
    "text": true,
    "bash": true,
    "config": true,
    "debug": true,
    "restart": true
  },

  "channels": {
    "telegram": {
      "enabled": true,
      "dmPolicy": "allowlist",
      "botToken": "${TELEGRAM_BOT_TOKEN}",
      "allowFrom": ["${TELEGRAM_USER_ID}"],
      "groupPolicy": "disabled",
      "historyLimit": 50,
      "streamMode": "partial",
      "mediaMaxMb": 10,
      "retry": {
        "attempts": 5,
        "minDelayMs": 300,
        "maxDelayMs": 15000,
        "jitter": 0.1
      },
      "network": { "autoSelectFamily": false },
      "actions": { "reactions": true, "sendMessage": true },
      "linkPreview": true
    }
  },

  "gateway": {
    "port": 18790,
    "mode": "local",
    "bind": "loopback",
    "controlUi": { "enabled": true },
    "auth": {
      "mode": "token",
      "token": "${GATEWAY_TOKEN}"
    }
  },

  "logging": {
    "level": "info",
    "file": "/tmp/starbix/starbix.log",
    "consoleLevel": "info",
    "consoleStyle": "pretty",
    "redactSensitive": "on"
  },

  "skills": {
    "load": {
      "extraDirs": ["${STARBIX_HOME}/skills"]
    }
  },

  "cron": { "enabled": true },
  "browser": { "enabled": false }
}
